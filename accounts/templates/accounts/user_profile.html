{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
{% endblock %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'js/bootstrap-datepicker/css/datepicker-custom.css' %}" />

    <link href="{% static 'js/iCheck/skins/square/square.css' %}" rel="stylesheet">
{#    <link href="{% static 'js/iCheck/skins/square/red.css' %}" rel="stylesheet">#}
    <link href="{% static 'js/iCheck/skins/square/green.css' %}" rel="stylesheet">

    <!--file upload-->
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap-fileupload.min.css' %}" />
{% endblock %}

{% block page-header %}
    <h1>个人信息</h1>
{% endblock %}

{% block page-body %}
    <div class="row">
        <div class="col-lg-12">
            <section class="panel">
                <header class="panel-heading">
                    个人信息
                </header>
                <div class="panel-body">
                    <form  enctype="multipart/form-data" class="form-horizontal adminex-form col-sm-12" action="{% url 'account:profile' %}" method="post">
                        {% csrf_token %}
                        {{ form.non_field_errors }}
                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">{{ form.avatar.label }}</label>
                            <div class="col-sm-10">
                                <div class="fileupload fileupload-new" data-provides="fileupload">
                                    <div class="fileupload-new thumbnail" style="width: 200px; height: 150px;">
                                        <img src="/media/{{ form.avatar.value }}" alt="" />
                                    </div>
                                    <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>
                                    <div>
                                        <span class="btn btn-default btn-file">
                                            <span class="fileupload-new"><i class="fa fa-paper-clip"></i> Select image</span>
                                            <span class="fileupload-exists"><i class="fa fa-undo"></i> Change</span>
                                            <input id="id_avatar" name="avatar" type="file" class="default" />
                                        </span>
                                        <a href="#" class="btn btn-danger fileupload-exists" data-dismiss="fileupload"><i class="fa fa-trash"></i> Remove</a>
                                    </div>
                                </div>
                                <br/>
                                <span class="label label-danger ">NOTE!</span>
                                <span>
                                 Attached image thumbnail is
                                 supported in Latest Firefox, Chrome, Opera,
                                 Safari and Internet Explorer 10 only
                                </span>
{#                                <img src="/media/{{ form.avatar.value }}" />#}
{#                                {{ form.avatar }}#}
{#                                <div class="controls col-md-9">#}
{#                                    <div class="fileupload fileupload-new" data-provides="fileupload">#}
{#                                        <span class="btn btn-default btn-file">#}
{#                                            <span class="fileupload-new"><i class="fa fa-paper-clip"></i> Select file</span>#}
{#                                            <span class="fileupload-exists"><i class="fa fa-undo"></i> Change</span>#}
{#                                            <input id="id_avatar" name="avatar" type="file" class="default" />#}
{#                                            <input type="file" class="default" />#}
{##}
{#                                        </span>#}
{#                                        <span class="fileupload-preview" style="margin-left:5px;"></span>#}
{#                                        <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none; margin-left:5px;"></a>#}
{#                                    </div>#}
{#                                </div>#}
{#                                <input id="id_avatar" name="avatar" type="file">#}
                                {% for error in form.avatar.errors %}
                                    <div class="has-error">
                                        <p class="help-block">{{ error }}</p>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">{{ form.username.label }}</label>
                            <div class="col-sm-10">
                                {{ form.username }}
                                {% for error in form.username.errors %}
                                    <div class="has-error">
                                        <p class="help-block">{{ error }}</p>
                                    </div>
                                {% endfor %}

                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">{{ form.email.label }}</label>
                            <div class="col-sm-10">
                                {{ form.email }}
                                {% for error in form.email.errors %}
                                    <div class="has-error">
                                        <p class="help-block">{{ error }}</p>
                                    </div>
                                {% endfor %}

                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">{{ form.enable_email.label }}</label>
                            <div class="col-sm-10 icheck">
                                <div class="square-green">
                                    <div class="checkbox">
                                        {{ form.enable_email }}
                                    </div>
                                    {% for error in form.enable_email.errors %}
                                        <div class="has-error">
                                            <p class="help-block">{{ error }}</p>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">{{ form.sex.label }}</label>

                            <div class="col-sm-9 icheck">
                                {% for radio in form.sex %}
                                    <div class="square col-sm-2">
                                        <div class="radio">
                                            {{ radio.tag }}
                                            {{ radio.choice_label }}
                                        </div>
                                    </div>
                                {% endfor %}
                                {% for error in form.sex.errors %}
                                    <div class="has-error">
                                        <p class="help-block">{{ error }}</p>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">{{ form.birthday.label }}</label>
                            <div class="col-sm-10 col-xs-11">
                                {{ form.birthday }}
                                {% for error in form.birthday.errors %}
                                    <div class="has-error">
                                        <p class="help-block">{{ error }}</p>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">{{ form.qq.label }}</label>
                            <div class="col-sm-10">
                                {{ form.qq }}
                                {% for error in form.qq.errors %}
                                    <div class="has-error">
                                        <p class="help-block">{{ error }}</p>
                                    </div>
                                {% endfor %}

                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">{{ form.signature.label }}</label>
                            <div class="col-sm-10">
                                {{ form.signature }}
                                {% for error in form.signature.errors %}
                                    <div class="has-error">
                                        <p class="help-block">{{ error }}</p>
                                    </div>
                                {% endfor %}

                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label"></label>
                            <div class="col-lg-offset-2 col-lg-10">
                                <button type="submit" class="btn btn-primary"> 修改 </button>
                                <a role="button" href="{% url 'blog:index' %}" class="btn btn-default"> 取消 </a>
                            </div>
                        </div>

                    </form>
{#                    <div class="col-sm-4">#}
{#                        <div class="row">#}
{#                            <header class="panel-heading">#}
{#                                sssss#}
{#                            </header>#}
{#                            <div class="panel-body">#}
{#                                sssss#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
                </div>
            </section>
        </div>

        {{ object.user_profile.avatar }}
        {{ object.username }}
        {{ object.email }}
        {{ object.user_profile.sex }}
        {{ object.user_profile.birthday }}
        {{ object.user_profile.signature }}
        {{ object.user_profile.qq }}
    </div>
{% endblock %}

{% block js %}
    <!--icheck -->
    <script src="{% static 'js/iCheck/jquery.icheck.js' %}"></script>
    <script src="{% static 'js/icheck-init.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/bootstrap-datepicker/js/bootstrap-datepicker.js' %}"></script>

    <!--pickers initialization-->
    <script src="{% static 'js/pickers-init.js' %}"></script>

    <!--file upload-->
    <script type="text/javascript" src="{% static 'js/bootstrap-fileupload.min.js' %}"></script>
{% endblock %}